<!DOCTYPE html>



<html lang="zh-CN" 
  
    mode="dark"
  
>

  <!--
  The Head
-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  
    <meta name="pv-cache-enabled" content="false">

    
  

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="【TCP skeleton小白】在MC中实现（伪）数组操作" />
<meta name="author" content="MineCommander" />
<meta property="og:locale" content="zh_CN" />
<meta name="description" content="原作者：skeleton小白" />
<meta property="og:description" content="原作者：skeleton小白" />
<link rel="canonical" href="https://minecommandercn.github.io/posts/%E5%9C%A8MC%E4%B8%AD%E5%AE%9E%E7%8E%B0-%E4%BC%AA-%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/" />
<meta property="og:url" content="https://minecommandercn.github.io/posts/%E5%9C%A8MC%E4%B8%AD%E5%AE%9E%E7%8E%B0-%E4%BC%AA-%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/" />
<meta property="og:site_name" content="MineCommander @DIM0" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-12-31T11:09:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="【TCP skeleton小白】在MC中实现（伪）数组操作" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@MineCommander" />
<meta name="google-site-verification" content="google_meta_tag_verification" />
<script type="application/ld+json">
{"datePublished":"2020-12-31T11:09:00+08:00","@type":"BlogPosting","dateModified":"2020-12-31T11:09:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://minecommandercn.github.io/posts/%E5%9C%A8MC%E4%B8%AD%E5%AE%9E%E7%8E%B0-%E4%BC%AA-%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/"},"url":"https://minecommandercn.github.io/posts/%E5%9C%A8MC%E4%B8%AD%E5%AE%9E%E7%8E%B0-%E4%BC%AA-%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C/","author":{"@type":"Person","name":"MineCommander"},"description":"原作者：skeleton小白","headline":"【TCP skeleton小白】在MC中实现（伪）数组操作","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <title>【TCP|skeleton小白】在MC中实现（伪）数组操作 | MineCommander @DIM0
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://www.favicon-generator.org/
-->



<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">

<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png">
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png">

<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

<link rel="manifest" href="/assets/img/favicons/manifest.json">
<meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- GA -->
  

  <!-- jsDelivr CDN -->
  <link rel="preconnect" href="cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="cdn.jsdelivr.net">

  <!-- Bootstrap -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous">

  <!-- Font Awesome -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"
    integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ="
    crossorigin="anonymous">

  <!--
  CSS selector for site.
-->

<link rel="stylesheet" href="/assets/css/style.css">


  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css">



  <!-- JavaScripts -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>

  <script defer
    src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script>

  <!--
  JS selector for site.
-->


  





<script defer src="/assets/js/dist/post.min.js"></script>






</head>


  <body data-spy="scroll" data-target="#toc">

    <!--
  The Side Bar
-->

<div id="sidebar" class="d-flex flex-column align-items-end">

  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="/" alt="avatar" class="mx-auto">
        
        <img src="https://i.loli.net/2021/02/24/58hWBg1EPwFvypm.png" alt="avatar" onerror="this.style.display='none'">
      </a>
    </div>

    <div class="site-title mt-3">
      <a href="/">MineCommander @DIM0</a>
    </div>

    <div class="site-subtitle font-italic">个人网站与博客</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">
    <!-- home -->
    <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>HOME</span>
      </a>
    </li>
    <!-- the real tabs -->
    
    <li class="nav-item">
      <a href="/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        <span>CATEGORIES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tags/" class="nav-link">
        <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i>
        <span>TAGS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ARCHIVES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/about/" class="nav-link">
        <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ABOUT</span>
      </a>
    </li> <!-- .nav-item -->
    

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center">

    
      

      
      <a href="https://github.com/MineCommanderCN" aria-label="github"
        
        target="_blank" rel="noopener">
        <i class="fab fa-github-alt"></i>
      </a>
      

    
      

      
      <a href="https://twitter.com/" aria-label="twitter"
        
        target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
      

    
      

      
      <a href="
          javascript:location.href = 'mailto:' + ['minecommander','outlook.com'].join('@')" aria-label="email"
        
        >
        <i class="fas fa-envelope"></i>
      </a>
      

    
      

      
      <a href="/feed.xml" aria-label="rss"
        
        >
        <i class="fas fa-rss"></i>
      </a>
      

    

    

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->


    <!--
  The Top Bar
-->

<div id="topbar-wrapper" class="row justify-content-center topbar-down">
  <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between">
    <span id="breadcrumb">

    

    

      

        
          

        

      

        
        <span>
          
          
          <a href="/">
            Posts
          </a>
        </span>

        

      

        
          <span>【TCP|skeleton小白】在MC中实现（伪）数组操作</span>

        

      

    

    </span><!-- endof #breadcrumb -->

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      Post
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" placeholder="Search...">
      <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i>
    </span>
    <span id="search-cancel" >Cancel</span>
  </div>

</div>


    <div id="main-wrapper">
      <div id="main">

        <!--
  Refactor the HTML structure.
-->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->


<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->


<!-- Add attribute 'hide-bullet' to the checkbox list -->




  

  

  <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->
  
  

  

  



<!-- return -->
<div class="row">

  <div id="post-wrapper" class="col-12 col-lg-11 col-xl-8">

    <div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

      <h1 data-toc-skip>【TCP|skeleton小白】在MC中实现（伪）数组操作</h1>

      <div class="post-meta text-muted d-flex flex-column">
        <!-- Published date and author -->
        <div>
          <!--
  Date format snippet
-->





<span class="timeago "
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Thu, Dec 31, 2020, 11:09 AM +0800"
  >

  
  

  
    Dec 31, 2020
  

  <i class="unloaded">2020-12-31T11:09:00+08:00</i>

</span>

          by
          <span class="author">
            MineCommander
          </span>
        </div>

        <div>
          <!-- lastmod -->
          

          <!-- read time -->
          <!--
  Calculate the post's reading time, and display the word count in tooltip
 -->


<!-- words per minute  -->







<!-- return element -->
<span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2460 words">13 min</span>


          <!-- page views -->
          

        </div>

      </div> <!-- .post-meta -->

      <div class="post-content">

        

        <p>原作者：skeleton小白</p>

<p><a href="https://www.mcbbs.net/forum.php?mod=viewthread&amp;tid=901171">https://www.mcbbs.net/forum.php?mod=viewthread&amp;tid=901171</a></p>

<p>转载于：2020/12/31</p>

<p>原作于：2019/8/12</p>

<hr />

<p><strong>警告：</strong> <strong>观看此贴前你可能需要一些编程基础，对基本数据结构有所掌握</strong></p>

<p>众所周知，MC指令<del>作为一款功能强大的编程语言</del>已经可以实现许多的计算操作，但是想要编程，必然少不了数组的使用。那么，在MC中是否也可以实现数组操作呢？答案是肯定的。
为方便讲解，以下指令全都基于在~ ~ ~处有一个箱子，其中第一格放了一个物品，物品在tag标签下有一个variables专门用于记录各种变量。
（数组与list并不是一个东西，但因为在这里用途相似，所以下文不做区分）</p>

<p>在nbt中有一个很类似于数组的东西，那就是list。我们可以用data指令很方便地修改或获取其中的数值，例如<code class="language-plaintext highlighter-rouge">/data get block ~ ~ ~ Items[0].tag.variables.array[x]</code> 就可以获得array这个list的第x位的内容。但是，这个x必须在指令中给出，无法使用变量代替（例如计分板分数）。也就是说，我们无法直接使用变量作为下标获得数组的元素，但我们可以通过<code class="language-plaintext highlighter-rouge">array[0]</code>获得数组的头元素。你想到了什么？没错，这不就是栈么！所以，在访问数组的第x位元素的时候，我们只需要将前x-1个元素从数组头（栈顶）弹出，然后此时的<code class="language-plaintext highlighter-rouge">array[0]</code>就是我们要的内容了。</p>

<p><a href="https://www.mcbbs.net/forum.php?mod=attachment&amp;aid=MTM3MzUzNnw3MmQ5ZTZjNXwxNjA5MzgyMzY1fDI5NDQ2NzB8OTAxMTcx">[下载附件：array.zip]</a></p>

<p>以下函数均在这个数据包中。加载数据包后先调用函数<code class="language-plaintext highlighter-rouge">array:initialize</code>，之后的所有函数或指令都站在生成出的箱子上执行，或者在指令最前面加上<code class="language-plaintext highlighter-rouge">/execute at @e[name=database]</code>（因为我懒得写exe）</p>

<h2 id="数组基本操作"><strong>数组基本操作</strong></h2>

<h3 id="读取操作">读取操作</h3>

<p>使用方式：设置index的variables分数为你要获取的数组元素的下标，然后调用array:get函数，此时result的variables分数即为获取的元素。</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">array:get</code></p>
</blockquote>

<pre><code class="language-mcfunction">data modify block ~ ~ ~ Items[0].tag.variables.temp set from block ~ ~ ~ Items[0].tag.variables.array
scoreboard players operation i variables = index variables
execute if score i variables &gt; 0 variables run function array:get_loop
execute store result score result variables run data get block ~ ~ ~ Items[0].tag.variables.array[0]
data modify block ~ ~ ~ Items[0].tag.variables.array set from block ~ ~ ~ Items[0].tag.variables.temp
data modify block ~ ~ ~ Items[0].tag.variables.temp set value []
</code></pre>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">array:get_loop</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players remove i variables 1
data remove block ~ ~ ~ Items[0].tag.variables.array[0]
execute if score i variables &gt; 0 variables run function array:get_loop
</code></pre>

<p>原理：先把原数组丢进temp中备份，然后把array[0]删除index次，此时array[0]就是所求的元素。然后再把temp中的备份丢回去</p>

<h3 id="写入操作">写入操作</h3>

<p>使用方式：设置index的variables分数为你要写入的数组元素的下标，将想要写入的值放在store的variables分数中，然后调用array:store函数。</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">array:store</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players operation i variables = index variables
execute if score i variables &gt; 0 variables run function array:store_loop
execute store result block ~ ~ ~ Items[0].tag.variables.array[0] int 1 run scoreboard players get store variables
scoreboard players operation i variables = index variables
execute if score i variables &gt; 0 variables run function array:store_return
</code></pre>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">array:store_loop</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players remove i variables 1
data modify block ~ ~ ~ Items[0].tag.variables.temp prepend from block ~ ~ ~ Items[0].tag.variables.array[0]
data remove block ~ ~ ~ Items[0].tag.variables.array[0]
execute if score i variables &gt; 0 variables run function array:store_loop
</code></pre>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">array:store_return</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players remove i variables 1
data modify block ~ ~ ~ Items[0].tag.variables.array prepend from block ~ ~ ~ Items[0].tag.variables.temp[0]
data remove block ~ ~ ~ Items[0].tag.variables.temp[0]
execute if score i variables &gt; 0 variables run function array:store_return
</code></pre>

<p>原理：因为直接备份整个数组再还原的话会把写入的值给一起覆盖掉，所以在写入时我们需要换个思路，每一次栈顶弹出的时候我们把这个值丢进另一个栈temp，赋值结束之后再把这个操作反过来，将temp的栈顶弹出并丢回array，重复直到temp为空。</p>

<h3 id="随机化">随机化</h3>

<p>使用方法：调用函数array:randomize</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">array:randomize</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players operation i variables = size variables
data modify block ~ ~ ~ Items[0].tag.variables.array set value []
execute if score i variables &gt; 0 variables run function array:randomize_add
</code></pre>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">array:randomize_add</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players remove i variables 1
data modify block ~ ~ ~ Items[0].tag.variables.array prepend value 0
summon area_effect_cloud ~ ~ ~ {CustomName:""random""}
summon area_effect_cloud ~ ~ ~ {CustomName:""random""}
summon area_effect_cloud ~ ~ ~ {CustomName:""random""}
summon area_effect_cloud ~ ~ ~ {CustomName:""random""}
summon area_effect_cloud ~ ~ ~ {CustomName:""random""}
summon area_effect_cloud ~ ~ ~ {CustomName:""random""}
execute store result block ~ ~ ~ Items[0].tag.variables.array[0] int 1 run data get entity @e[limit=1,sort=random,name=random,type=area_effect_cloud] UUIDMost 0.00000000000000001
execute if score i variables &gt; 0 variables run function array:randomize_add
</code></pre>

<p>原理：清空array并往里面丢size个随机数。这里用了一个非常暴力的伪随机，生成一堆aec并随机取其中一个的UUIDMost的最后两位。（还不是因为我懒得写随机）</p>

<p>学完了数组存取，那么下面当然是排序了。数据包中还写了两个排序，分别是冒泡排序和快速排序。
我们先来看一下简单一点的冒泡排序</p>

<h2 id="冒泡排序"><strong>冒泡排序</strong></h2>

<p>C++代码：</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">size</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&gt;</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
</pre></td></tr></tbody></table></code></div></div>

<p>没错只有一行。但是因为MC运算的复杂性，这里用了四个函数实现了冒泡排序。
使用方法：调用bubble_sort:sort函数</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">bubble_sort:sort</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players set sort_i variables 0
function bubble_sort:loop1
</code></pre>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">bubble_sort:loop1</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players set sort_j variables 0
scoreboard players operation stop variables = size variables
scoreboard players remove stop variables 1
scoreboard players operation stop variables -= sort_i variables
execute if score sort_j variables &lt; stop variables run function bubble_sort:loop2
scoreboard players add sort_i variables 1
execute if score sort_i variables &lt; size variables run function bubble_sort:loop1
</code></pre>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">bubble_sort:loop2</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players operation index variables = sort_j variables
function array:get
scoreboard players operation x variables = result variables
scoreboard players add index variables 1
function array:get
scoreboard players operation y variables = result variables
execute if score x variables &gt; y variables run function bubble_sort:swap
scoreboard players add sort_j variables 1
execute if score sort_j variables &lt; stop variables run function bubble_sort:loop2
</code></pre>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">bubble_sort:swap</code></p>
</blockquote>

<pre><code class="language-mcfunction">scoreboard players operation index variables = sort_j variables
scoreboard players operation store variables = y variables
function array:store
scoreboard players add index variables 1
scoreboard players operation store variables = x variables
function array:store
</code></pre>

<p>对照C++代码就很好理解这个函数。其中，loop1和loop2分别对应代码中的内外两层循环。为避免与存取函数的变量冲突，这里用sort_i和sort_j来表示排序函数中的循环变量。</p>

<p>你已经掌握了基本的数组操作和排序算法，那么现在请尝试实现更高级的排序算法（指快速排序）</p>

<h2 id="快速排序"><strong>快速排序</strong></h2>

<p>快速排序是一种基于分治思想的不稳定排序算法，在这里不详细描述其排序过程，不了解的请百度。</p>

<p>C++代码：</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">sort</span><span class="p">(</span><span class="kt">int</span> <span class="n">l</span><span class="p">,</span><span class="kt">int</span> <span class="n">r</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">l</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="n">r</span><span class="p">,</span><span class="n">mid</span><span class="o">=</span><span class="n">a</span><span class="p">[(</span><span class="n">l</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">];</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">j</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;</span><span class="n">mid</span><span class="p">)</span> <span class="n">i</span><span class="o">++</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">&gt;</span><span class="n">mid</span><span class="p">)</span> <span class="n">j</span><span class="o">--</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">j</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
                <span class="n">i</span><span class="o">++</span><span class="p">,</span><span class="n">j</span><span class="o">--</span><span class="p">;</span>
            <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">l</span><span class="o">&lt;</span><span class="n">j</span><span class="p">)</span> <span class="n">sort</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="n">j</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="n">r</span><span class="p">)</span> <span class="n">sort</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">r</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>使用方法：调用quick_sort:sort函数</p>

<p>快速排序的指令实现较为复杂，在这里就不一一列出函数内容，具体详见数据包。循环的实现方式与冒泡排序相同。因为快速排序涉及到递归传值，所以函数中将variables.stack作为一个人工栈使用以模拟实际程序中的系统栈操作，其中的l和r分别表示每一次递归的l和r值。</p>

<p>你已经学会了一维数组，那为什么不尝试增加一个维度呢？</p>

<h2 id="二维数组"><strong>二维数组</strong></h2>

<p>array_2d命名空间下包含了二维数组的存取操作。使用前请先调用<code class="language-plaintext highlighter-rouge">array_2d:initialize</code>函数。与之前不同的是，这个二维数组的每个元素是个二元组，初始时分别表示该元素的行号和列号。因此读写时不能以计分板作为中间变量。
读取操作：设置indexx和indexy的variables分数分别为想要获取的元素的行号和列号，然后调用<code class="language-plaintext highlighter-rouge">array_2d:get</code>函数，此时<code class="language-plaintext highlighter-rouge">Items[0].tag.variables.result</code>即为获得的元素。
写入操作：设置indexx和indexy的variables分数分别为想要写入的元素的行号和列号，设置<code class="language-plaintext highlighter-rouge">Items[0].tag.variables.store</code>的值为需要写入的值，然后调用<code class="language-plaintext highlighter-rouge">array_2d:store</code>函数。</p>

<p>具体指令详见数据包</p>

<p>原理：与一维数组的存取类似。获取第x行第y列的元素，只需要先将前x-1行弹出，再将第一行的前y-1列弹出就行了。唯一不同的是，在store操作时，因为同一个list中只能存同一种数据类型的数据（不能同时存int和list），所以要开两个栈分别存储弹出的前x-1行（list）和y-1列（int）。</p>

<h2 id="效率分析"><strong>效率分析</strong></h2>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3.ax1x.com/2020/12/31/rX56sA.png" alt="bubble_sort" /></p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://s3.ax1x.com/2020/12/31/rX5RdP.png" alt="quick_sort" /></p>

<p><strong>警告：</strong> <strong>请勿轻易尝试类似的大规模排序操作</strong></p>

<p>前者（冒泡排序）排了将近5分钟，后者（快速排序）排了大概半分钟。（电脑年代久远，可能时间会偏长）</p>

<p>在实际编程中，冒泡排序是个时间复杂度为O(n2)的算法，而快速排序作为不稳定排序，其时间复杂度介于O(nlogn)和O(n2)之间。但因为MC的数组存取操作是个O(n)的操作（最坏时需要进行n次出栈操作），所以在MC中实现的冒泡排序和快速排序时间复杂度分别为O(n3)和O(n2logn)~O(n3)。从时间复杂度来看效率实在不高。其次还要强调的一点是MC中的一条指令并不等同于电脑的一次运算，所以这两个排序的时间复杂度甚至会更高。因此，如果想用MC来编程的话…也就想想吧。你总不希望电脑编程只需要1秒钟就能跑出来的程序你用MC跑整整一天吧…</p>


      </div>

      <div class="post-tail-wrapper text-muted">

        <!-- categories -->
        
        <div class="post-meta mb-3">
          <i class="far fa-folder-open fa-fw mr-1"></i>
          
            <a href='/categories/minecraft/'>Minecraft</a>,
            <a href='/categories/%E6%90%AC%E8%BF%90/'>搬运</a>
        </div>
        

        <!-- tags -->
        
        <div class="post-tags">
          <i class="fa fa-tags fa-fw mr-1"></i>
          
          <a href="/tags/mcbbs/"
            class="post-tag no-text-decoration" >mcbbs</a>
          
          <a href="/tags/cb/"
            class="post-tag no-text-decoration" >cb</a>
          
          </div>
        

        <div class="post-tail-bottom
          d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
          
          <div class="license-wrapper">
            This post is licensed under
            <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
            by the author.
          </div>
          

          <!--
 Post sharing snippet
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Share</span>
  <span class="share-icons">
    
    

    

    <i class="fa-fw fas fa-link small" onclick="copyLink()"
        data-toggle="tooltip" data-placement="top" title="Copy link"></i>

  </span>
</div>


        </div><!-- .post-tail-bottom -->

      </div><!-- div.post-tail -->

    </div> <!-- .post -->


  </div> <!-- #post-wrapper -->

  

  

  <!--
  The Pannel on right side (Desktop views)
-->

<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">

  <div class="access">

  














  

  















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  
    <div id="access-tags">
      <span>Trending Tags</span>
      <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

      
        
        <a class="post-tag" href="/tags/cb/">cb</a>
      
        
        <a class="post-tag" href="/tags/mcbbs/">mcbbs</a>
      
        
        <a class="post-tag" href="/tags/the-diver/">the-diver</a>
      

      </div>
    </div>
  
  </div> <!-- .access -->

  
    <!-- BS-toc.js will be loaded at medium priority -->
    <script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script>
    <div id="toc-wrapper" class="pl-0 pr-4 mb-5">
      <span class="pl-3 pt-2 mb-2">Contents</span>
      <nav id="toc" data-toggle="toc"></nav>
    </div>
  

</div> <!-- #panel-wrapper -->


</div> <!-- .row -->

<div class="row">
  <div class="col-12 col-lg-11 col-xl-8">
    <div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

    <!--
 Recommend the other 3 posts according to the tags and categories of the current post,
 if the number is not enough, use the other latest posts to supplement.
-->

<!-- The total size of related posts  -->


<!-- An random integer that bigger than 0  -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy}  -->








  

  

  

  

  

  


  

  
    






<!-- Fill with the other newlest posts  -->




  
    
    
      
      
    
  
    
    
  





  <div id="related-posts" class="mt-5 mb-2 mb-sm-4">
    <h3 class="pt-2 mt-1 mb-4 ml-1"
      data-toc-skip>Further Reading</h3>
    <div class="card-deck mb-4">
    
      
      
      <div class="card">
        <a href="/posts/The-Diver/">
          <div class="card-body">
            <!--
  Date format snippet
-->





<span class="timeago small"
  >

  
  

  
    Feb  5
  

  <i class="unloaded">2021-02-05T16:45:00+08:00</i>

</span>

            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>The Diver - 下载引导</h3>
            <div class="text-muted small">
              <p>
                





                

MCBBS原帖：https://www.mcbbs.net/thread-1164947-1-1.html

原地图下载：https://minecommander.lanzous.com/b0106ovud（密码d93f）

更新包下载：https://minecommander.lanzous.com/b0106ovyh
（密码bfey）

              </p>
            </div>
          </div>
        </a>
      </div>
    
    </div> <!-- .card-deck -->
  </div> <!-- #related-posts -->



    <!--
  Navigation buttons at the bottom of the post.
-->

<div class="post-navigation d-flex justify-content-between">
  
  <span class="btn btn-outline-primary disabled"
    prompt="Older">
    <p>-</p>
  </span>
  

  
  <a href="/posts/The-Diver/" class="btn btn-outline-primary"
    prompt="Newer">
    <p>The Diver - 下载引导</p>
  </a>
  

</div>


    

    </div> <!-- #post-extend-wrapper -->

  </div> <!-- .col-* -->

</div> <!-- .row -->



  <!--
  image lazy load: https://github.com/ApoorvSaxena/lozad.js
-->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>

<script type="text/javascript">
  const imgs = document.querySelectorAll('.post-content img');
  const observer = lozad(imgs);
  observer.observe();
</script>




        <!--
  The Footer
-->

<footer class="d-flex w-100 justify-content-center">
  <div class="d-flex justify-content-between align-items-center">
    <div class="footer-left">
      <p class="mb-0">
        © 2021
        <a href="https://zhihu.com/people/MineCommander">MineCommander</a>.
        
        <span data-toggle="tooltip" data-placement="top"
          title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span>
        
      </p>
    </div>

    <div class="footer-right">
      <p class="mb-0">
        Powered by
        <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
        with
        <a href="https://github.com/cotes2020/jekyll-theme-chirpy"
          target="_blank" rel="noopener">Chirpy</a>
        theme.
      </p>
    </div>

  </div> <!-- div.d-flex -->
</footer>


      </div>

      <!--
  The Search results
-->
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-12 col-sm-11 post-content">
    <div id="search-hints">
      <h4 class="text-muted mb-4">Trending Tags</h4>

      















  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



      
        
        <a class="post-tag" href="/tags/cb/">cb</a>
      
        
        <a class="post-tag" href="/tags/mcbbs/">mcbbs</a>
      
        
        <a class="post-tag" href="/tags/the-diver/">the diver</a>
      

    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>


    </div> <!-- #main-wrapper -->

    

    <div id="mask"></div>

    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script>

<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="https://minecommandercn.github.io{url}">{title}</a>  <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    {categories}    {tags}  </div>  <p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">Oops! No result founds.</p>',
  templateMiddleware: function(prop, value, template) {
    if (prop === 'categories') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
      }
    }

    if (prop === 'tags') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
      }
    }
  }
});
</script>


  </body>

</html>

